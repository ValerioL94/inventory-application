<%- contentFor('page') %>

<h2><%= title %>: <%= category.name %></h2>

<% if (typeof products!=='undefined' && products.length) { %>
<p class="errors-list"><strong>Delete the following products before attempting to delete this category.</strong></p>
<div class="detail-list">
  <h3>Products</h3>
  <dl>
    <% products.forEach(product => { %>
    <dt>
      <a href="/products/<%= product.id %>"><%= product.name %></a>
    </dt>
    <dd>
      <%= product.description %>
    </dd>
    <% }) %>
  </dl>
</div>
<% } else { %>
<p>Do you really want to delete this Category?</p>
<form method="post">
  <div class="form-group">
    <input type="hidden" id="categoryId" class="form-control" name="categoryId" value="<%= category.id %>">
    <label for="password">Password: </label>
    <input class="form-control" type="password" required name="password" id="password" placeholder="Enter admin password">
  </div>
  <button type="submit" class="form-submit">Delete</button>
</form>
<% } %>
<% if (typeof errors!=='undefined') { %>
<ul class="errors-list">
  <% errors.forEach(error => { %>
  <li><%= error.msg %></li>
  <% }) %>
</ul>
<% } %>